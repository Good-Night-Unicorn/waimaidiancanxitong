import{d as P,r as T,c as A,b as i,e as d,f as e,g as l,u as I,i as s,o as u,F as v,j as b,t as c,l as _,n as $,k as j,_ as q}from"./index-d6e43adc.js";import{u as D}from"./order-9306be62.js";const E={class:"page-container orders"},L={class:"card orders__header"},R={class:"card"},U={class:"items"},z=P({__name:"OrdersPage",setup(G){const m=D(),g=I(),p=T("all"),f=[{label:"全部",value:"all"},{label:"待确认",value:"pending"},{label:"制作中",value:"preparing"},{label:"配送中",value:"on-the-way"},{label:"已送达",value:"delivered"},{label:"已完成",value:"completed"},{label:"已取消",value:"cancelled"}],w=A(()=>p.value==="all"?m.sortedOrders:m.sortedOrders.filter(r=>r.status===p.value)),y=r=>{switch(r){case"pending":return"待确认";case"preparing":return"制作中";case"on-the-way":return"配送中";case"delivered":return"已送达";case"completed":return"已完成";case"cancelled":return"已取消";default:return"未知"}},k=r=>{switch(r){case"pending":return"info";case"preparing":return"warning";case"on-the-way":return"primary";case"delivered":return"success";case"completed":return"success";case"cancelled":return"danger";default:return"info"}},h=(r,t)=>{m.updateStatus(r,t)};return(r,t)=>{const x=s("el-segmented"),o=s("el-table-column"),O=s("el-tag"),C=s("el-button"),V=s("el-dropdown-item"),S=s("el-dropdown-menu"),B=s("el-dropdown"),F=s("el-space"),N=s("el-table");return u(),i("div",E,[d("section",L,[t[1]||(t[1]=d("h1",null,"订单列表",-1)),t[2]||(t[2]=d("p",{class:"subtitle"},"查看所有餐厅订单状态，掌握每一笔订单动态。",-1)),e(x,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=a=>p.value=a),options:f},null,8,["modelValue"])]),d("section",R,[e(N,{data:w.value,border:"",stripe:""},{default:l(()=>[e(o,{prop:"id",label:"订单号",width:"160"}),e(o,{prop:"restaurantName",label:"餐厅",width:"160"}),e(o,{label:"菜品"},{default:l(({row:a})=>[d("div",U,[(u(!0),i(v,null,b(a.items,n=>(u(),i("p",{key:n.menuId},c(n.name)+" × "+c(n.quantity),1))),128))])]),_:1}),e(o,{label:"金额",width:"120"},{default:l(({row:a})=>[_("¥"+c(a.totalAmount.toFixed(2)),1)]),_:1}),e(o,{prop:"status",label:"状态",width:"120"},{default:l(({row:a})=>[e(O,{type:k(a.status)},{default:l(()=>[_(c(y(a.status)),1)]),_:2},1032,["type"])]),_:1}),e(o,{prop:"createdAt",label:"下单时间",width:"160"}),e(o,{label:"操作",width:"180"},{default:l(({row:a})=>[e(F,null,{default:l(()=>[e(C,{link:"",type:"primary",onClick:n=>$(g).push({name:"order-detail",params:{id:a.id}})},{default:l(()=>[...t[3]||(t[3]=[_("详情",-1)])]),_:1},8,["onClick"]),e(B,null,{dropdown:l(()=>[e(S,null,{default:l(()=>[(u(!0),i(v,null,b(f.filter(n=>n.value!=="all"),n=>(u(),j(V,{key:n.value,onClick:H=>h(a.id,n.value)},{default:l(()=>[_(c(n.label),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),default:l(()=>[t[4]||(t[4]=d("span",{class:"el-dropdown-link"},"更新状态",-1))]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])])])}}});const M=q(z,[["__scopeId","data-v-905ee2ce"]]);export{M as default};
