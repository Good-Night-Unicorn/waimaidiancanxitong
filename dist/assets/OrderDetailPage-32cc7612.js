import{d as N,c as y,b as c,e,t as n,f as l,g as u,n as g,F as O,j as S,l as o,m as h,k as D,u as I,z as V,i as p,o as d,_ as q}from"./index-d6e43adc.js";import{u as A}from"./order-9306be62.js";const P={key:0,class:"page-container detail"},T={class:"card detail__header"},$={class:"meta"},z={class:"status"},R={class:"actions"},j={class:"card detail__body"},E={class:"items"},L={class:"items__list"},G=["src","alt"],H={class:"info"},J={class:"summary card"},K={class:"total"},M={key:0},Q=N({__name:"OrderDetailPage",setup(U){const m=I(),f=V(),v=A(),k=f.params.id,s=y(()=>v.getOrderById(k)),x=y(()=>s.value?s.value.items.reduce((t,i)=>t+i.price*i.quantity,0).toFixed(2):"0.00"),C=r=>{switch(r){case"pending":return"待确认";case"preparing":return"制作中";case"on-the-way":return"配送中";case"delivered":return"已送达";case"completed":return"已完成";case"cancelled":return"已取消";default:return"未知状态"}},F=r=>{switch(r){case"pending":return"info";case"preparing":return"warning";case"on-the-way":return"primary";case"delivered":return"success";case"completed":return"success";case"cancelled":return"danger";default:return"info"}},b=r=>{s.value&&v.updateStatus(s.value.id,r)};return(r,t)=>{const i=p("el-tag"),_=p("el-button"),w=p("el-divider"),B=p("el-empty");return s.value?(d(),c("div",P,[e("section",T,[e("div",null,[e("h1",null,n(s.value.restaurantName),1),e("p",$,[e("span",null,"下单时间："+n(s.value.createdAt),1),e("span",null,"配送地址："+n(s.value.contact.address),1)])]),e("div",z,[l(i,{type:F(s.value.status),size:"large"},{default:u(()=>[o(n(C(s.value.status)),1)]),_:1},8,["type"]),e("div",R,[l(_,{round:"",type:"primary",onClick:t[0]||(t[0]=a=>b("delivered"))},{default:u(()=>[...t[3]||(t[3]=[o("标记已送达",-1)])]),_:1}),l(_,{round:"",onClick:t[1]||(t[1]=a=>g(m).push({name:"orders"}))},{default:u(()=>[...t[4]||(t[4]=[o("返回列表",-1)])]),_:1})])])]),e("section",j,[e("div",E,[t[5]||(t[5]=e("h3",null,"菜品信息",-1)),e("div",L,[(d(!0),c(O,null,S(s.value.items,a=>(d(),c("article",{key:a.menuId,class:"item"},[e("img",{src:a.image,alt:a.name},null,8,G),e("div",H,[e("h4",null,n(a.name),1),e("p",null,"数量："+n(a.quantity),1)]),e("strong",null,"¥"+n((a.price*a.quantity).toFixed(2)),1)]))),128))])]),e("aside",J,[t[9]||(t[9]=e("h3",null,"订单金额",-1)),e("p",null,[t[6]||(t[6]=o(" 商品金额 ",-1)),e("span",null,"¥"+n(x.value),1)]),e("p",null,[t[7]||(t[7]=o(" 配送费 ",-1)),e("span",null,"¥"+n(s.value.deliveryFee.toFixed(2)),1)]),e("p",K,[t[8]||(t[8]=o(" 合计 ",-1)),e("span",null,"¥"+n(s.value.totalAmount.toFixed(2)),1)]),l(w),t[10]||(t[10]=e("h3",null,"收货信息",-1)),e("p",null,"收货人："+n(s.value.contact.name)+"（"+n(s.value.contact.phone)+"）",1),e("p",null,"地址："+n(s.value.contact.address),1),s.value.note?(d(),c("p",M,"备注："+n(s.value.note),1)):h("",!0)])])])):(d(),D(B,{key:1,description:"未找到订单，返回重试"},{default:u(()=>[l(_,{type:"primary",onClick:t[2]||(t[2]=a=>g(m).push({name:"orders"}))},{default:u(()=>[...t[11]||(t[11]=[o("返回订单列表",-1)])]),_:1})]),_:1}))}}});const Y=q(Q,[["__scopeId","data-v-e47b9589"]]);export{Y as default};
