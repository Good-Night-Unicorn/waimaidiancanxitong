import{d as k,y as x,r as f,a as C,b as q,e as t,f as o,g as a,l as d,n as R,u as z,z as B,i as l,o as E,E as c,_ as L}from"./index-d6e43adc.js";const N={class:"auth"},P={class:"auth__panel card"},S={class:"actions"},U=k({__name:"LoginPage",setup(h){const i=z(),g=B(),v=x(),n=f(),u=f(!1),s=C({username:"",password:""}),w={username:[{required:!0,message:"请输入用户名或手机号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},y=async()=>{if(!(!n.value||!await n.value.validate().catch(()=>!1))){u.value=!0;try{v.login({username:s.username,password:s.password}),c.success("登录成功");const e=g.query.redirect||"/";i.push(e)}catch(e){c.error(e.message)}finally{u.value=!1}}};return(b,e)=>{const p=l("el-input"),m=l("el-form-item"),_=l("el-button"),V=l("el-form");return E(),q("div",N,[e[8]||(e[8]=t("div",{class:"auth__illustration"},[t("img",{src:"https://images.unsplash.com/photo-1525610553991-2bede1a236e2?auto=format&fit=crop&w=900&q=80",alt:"外卖小哥"})],-1)),t("div",P,[e[6]||(e[6]=t("h1",null,"美食外卖",-1)),e[7]||(e[7]=t("p",{class:"tagline"},"新鲜美食，极速送达，享受美味生活",-1)),o(V,{ref_key:"formRef",ref:n,model:s,rules:w,"label-position":"top",size:"large"},{default:a(()=>[o(m,{label:"用户名 / 手机号",prop:"username"},{default:a(()=>[o(p,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=r=>s.username=r),placeholder:"请输入用户名或手机号"},null,8,["modelValue"])]),_:1}),o(m,{label:"密码",prop:"password"},{default:a(()=>[o(p,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=r=>s.password=r),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),o(_,{type:"primary",size:"large",block:"",loading:u.value,onClick:y},{default:a(()=>[...e[3]||(e[3]=[d("登录",-1)])]),_:1},8,["loading"])]),_:1},8,["model"]),t("p",S,[e[5]||(e[5]=d(" 还没有账号？ ",-1)),o(_,{link:"",type:"primary",onClick:e[2]||(e[2]=r=>R(i).push({name:"register"}))},{default:a(()=>[...e[4]||(e[4]=[d("立即注册",-1)])]),_:1})])])])}}});const M=L(U,[["__scopeId","data-v-0c73aa21"]]);export{M as default};
