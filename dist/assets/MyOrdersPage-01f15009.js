import{d as b,y as F,c as V,b as r,e,t as n,n as p,k as h,g as i,F as k,j as C,u as M,i as _,o,f as m,l as c,m as x,_ as P}from"./index-d6e43adc.js";import{u as T}from"./order-9306be62.js";const $={class:"page-container my-orders"},q={class:"card header"},A={class:"subtitle"},I={key:1,class:"timeline"},j={class:"timeline__header"},D={class:"meta"},E={class:"items"},L=["src","alt"],R={class:"footer"},U={key:0},z={class:"actions"},G={class:"total"},H=b({__name:"MyOrdersPage",setup(J){const y=M(),f=T(),u=F(),g=V(()=>u.profile?f.getOrdersByContact(u.profile.username):[]),S=l=>{switch(l){case"pending":return"待确认";case"preparing":return"制作中";case"on-the-way":return"配送中";case"delivered":return"已送达";case"completed":return"已完成";case"cancelled":return"已取消";default:return"未知状态"}},w=l=>{switch(l){case"pending":return"info";case"preparing":return"warning";case"on-the-way":return"primary";case"delivered":case"completed":return"success";case"cancelled":return"danger";default:return"info"}},B=(l,s)=>{f.updateStatus(l,s)};return(l,s)=>{var v;const d=_("el-button"),N=_("el-empty"),O=_("el-tag");return o(),r("div",$,[e("section",q,[e("div",null,[s[1]||(s[1]=e("h1",null,"我的订单",-1)),e("p",A,"欢迎 "+n((v=p(u).profile)==null?void 0:v.username)+"，以下是您的历史订单。",1)])]),g.value.length===0?(o(),h(N,{key:0,description:"暂时没有订单记录，快去下单吧～"},{default:i(()=>[m(d,{type:"primary",onClick:s[0]||(s[0]=t=>p(y).push({name:"home"}))},{default:i(()=>[...s[2]||(s[2]=[c("去首页找美食",-1)])]),_:1})]),_:1})):(o(),r("section",I,[(o(!0),r(k,null,C(g.value,t=>(o(),r("article",{key:t.id,class:"timeline__item card"},[e("div",j,[e("h3",null,n(t.restaurantName),1),m(O,{type:w(t.status)},{default:i(()=>[c(n(S(t.status)),1)]),_:2},1032,["type"])]),e("p",D,[e("span",null,"下单时间："+n(t.createdAt),1),e("span",null,"订单编号："+n(t.id),1)]),e("div",E,[(o(!0),r(k,null,C(t.items,a=>(o(),r("div",{key:a.menuId,class:"items__item"},[e("img",{src:a.image,alt:a.name},null,8,L),e("div",null,[e("strong",null,n(a.name),1),e("p",null,"数量："+n(a.quantity),1)]),e("span",null,"¥"+n((a.price*a.quantity).toFixed(2)),1)]))),128))]),e("div",R,[e("div",null,[e("p",null,"配送地址："+n(t.contact.address),1),t.note?(o(),r("p",U,"备注："+n(t.note),1)):x("",!0)]),e("div",z,[e("span",G,"合计 ¥"+n(t.totalAmount.toFixed(2)),1),m(d,{link:"",type:"primary",onClick:a=>p(y).push({name:"order-detail",params:{id:t.id}})},{default:i(()=>[...s[3]||(s[3]=[c(" 查看详情 ",-1)])]),_:1},8,["onClick"]),t.status==="delivered"?(o(),h(d,{key:0,type:"primary",plain:"",round:"",onClick:a=>B(t.id,"completed")},{default:i(()=>[...s[4]||(s[4]=[c(" 确认收货 ",-1)])]),_:1},8,["onClick"])):x("",!0)])])]))),128))]))])}}});const W=P(H,[["__scopeId","data-v-eec56865"]]);export{W as default};
